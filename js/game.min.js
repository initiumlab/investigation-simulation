// Typed.js | Copyright (c) 2014 Matt Boldt | www.mattboldt.com

// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:

// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.

function PxLoaderImage(e,t,n,r){var i=this,s=null;this.img=new Image,r!==undefined&&(this.img.crossOrigin=r),this.tags=t,this.priority=n;var o=function(){i.img.readyState==="complete"&&(f(),s.onLoad(i))},u=function(){f(),s.onLoad(i)},a=function(){f(),s.onError(i)},f=function(){i.unbind("load",u),i.unbind("readystatechange",o),i.unbind("error",a)};this.start=function(t){s=t,i.bind("load",u),i.bind("readystatechange",o),i.bind("error",a),i.img.src=e},this.checkStatus=function(){i.img.complete&&(f(),s.onLoad(i))},this.onTimeout=function(){f(),i.img.complete?s.onLoad(i):s.onTimeout(i)},this.getName=function(){return e},this.bind=function(e,t){i.img.addEventListener?i.img.addEventListener(e,t,!1):i.img.attachEvent&&i.img.attachEvent("on"+e,t)},this.unbind=function(e,t){i.img.removeEventListener?i.img.removeEventListener(e,t,!1):i.img.detachEvent&&i.img.detachEvent("on"+e,t)}}function PxLoaderSound(e,t,n,r){var i=this,s=null,o=navigator.userAgent.match(/(ipad|iphone|ipod)/i),u=navigator.userAgent.match(/android/i);this.useGlobalHTML5Audio=o||u,this.tags=n,this.priority=r,this.sound=soundManager.createSound({id:e,url:t,autoLoad:!1,onload:function(){s.onLoad(i)},onsuspend:function(){s.onTimeout(i)},whileloading:function(){var e=this.bytesLoaded,t=this.bytesTotal;e>0&&e===t&&s.onLoad(i)}}),this.start=function(e){s=e,this.useGlobalHTML5Audio?s.onTimeout(i):this.sound.load()},this.checkStatus=function(){switch(i.sound.readyState){case 0:break;case 1:break;case 2:s.onError(i);break;case 3:s.onLoad(i)}},this.onTimeout=function(){s.onTimeout(i)},this.getName=function(){return t}}PxLoader.prototype.addImage=function(e,t,n,r){var i=new PxLoaderImage(e,t,n,r);return this.add(i),i.img},typeof define=="function"&&define.amd&&define("PxLoaderImage",[],function(){return PxLoaderImage}),PxLoader.prototype.addSound=function(e,t,n,r){var i=new PxLoaderSound(e,t,n,r);return this.add(i),i.sound},typeof define=="function"&&define.amd&&define("PxLoaderSound",[],function(){return PxLoaderSound}),!function(e){"undefined"!=typeof module&&module.exports?module.exports=e:e(jQuery,window,document)}(function(e){!function(t){var n="function"==typeof define&&define.amd,r="undefined"!=typeof module&&module.exports,i="https:"==document.location.protocol?"https:":"http:",s="cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.12/jquery.mousewheel.min.js";n||(r?require("jquery-mousewheel")(e):e.event.special.mousewheel||e("head").append(decodeURI("%3Cscript src="+i+"//"+s+"%3E%3C/script%3E"))),t()}(function(){var t,n="mCustomScrollbar",r="mCS",i=".mCustomScrollbar",s={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:!0,autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},o=0,u={},a=window.attachEvent&&!window.addEventListener?1:0,f=!1,l=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],c={init:function(t){var t=e.extend(!0,{},s,t),n=h.call(this);if(t.live){var a=t.liveSelector||this.selector||i,f=e(a);if("off"===t.live)return void d(a);u[a]=setTimeout(function(){f.mCustomScrollbar(t),"once"===t.live&&f.length&&d(a)},500)}else d(a);return t.setWidth=t.set_width?t.set_width:t.setWidth,t.setHeight=t.set_height?t.set_height:t.setHeight,t.axis=t.horizontalScroll?"x":v(t.axis),t.scrollInertia=t.scrollInertia>0&&t.scrollInertia<17?17:t.scrollInertia,"object"!=typeof t.mouseWheel&&1==t.mouseWheel&&(t.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),t.mouseWheel.scrollAmount=t.mouseWheelPixels?t.mouseWheelPixels:t.mouseWheel.scrollAmount,t.mouseWheel.normalizeDelta=t.advanced.normalizeMouseWheelDelta?t.advanced.normalizeMouseWheelDelta:t.mouseWheel.normalizeDelta,t.scrollButtons.scrollType=m(t.scrollButtons.scrollType),p(t),e(n).each(function(){var n=e(this);if(!n.data(r)){n.data(r,{idx:++o,opt:t,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:n.css("direction"),cbOffsets:null,trigger:null});var i=n.data(r),s=i.opt,u=n.data("mcs-axis"),a=n.data("mcs-scrollbar-position"),f=n.data("mcs-theme");u&&(s.axis=u),a&&(s.scrollbarPosition=a),f&&(s.theme=f,p(s)),g.call(this),e("#mCSB_"+i.idx+"_container img:not(."+l[2]+")").addClass(l[2]),c.update.call(null,n)}})},update:function(t,n){var i=t||h.call(this);return e(i).each(function(){var t=e(this);if(t.data(r)){var i=t.data(r),s=i.opt,o=e("#mCSB_"+i.idx+"_container"),u=[e("#mCSB_"+i.idx+"_dragger_vertical"),e("#mCSB_"+i.idx+"_dragger_horizontal")];if(!o.length)return;i.tweenRunning&&$(t),t.hasClass(l[3])&&t.removeClass(l[3]),t.hasClass(l[4])&&t.removeClass(l[4]),E.call(this),b.call(this),"y"===s.axis||s.advanced.autoExpandHorizontalScroll||o.css("width",y(o.children())),i.overflowed=N.call(this),A.call(this),s.autoDraggerLength&&S.call(this),x.call(this),k.call(this);var a=[Math.abs(o[0].offsetTop),Math.abs(o[0].offsetLeft)];"x"!==s.axis&&(i.overflowed[0]?u[0].height()>u[0].parent().height()?C.call(this):(J(t,""+a[0],{dir:"y",dur:0,overwrite:"none"}),i.contentReset.y=null):(C.call(this),"y"===s.axis?L.call(this):"yx"===s.axis&&i.overflowed[1]&&J(t,""+a[1],{dir:"x",dur:0,overwrite:"none"}))),"y"!==s.axis&&(i.overflowed[1]?u[1].width()>u[1].parent().width()?C.call(this):(J(t,""+a[1],{dir:"x",dur:0,overwrite:"none"}),i.contentReset.x=null):(C.call(this),"x"===s.axis?L.call(this):"yx"===s.axis&&i.overflowed[0]&&J(t,""+a[0],{dir:"y",dur:0,overwrite:"none"}))),n&&i&&(2===n&&s.callbacks.onImageLoad&&"function"==typeof s.callbacks.onImageLoad?s.callbacks.onImageLoad.call(this):3===n&&s.callbacks.onSelectorChange&&"function"==typeof s.callbacks.onSelectorChange?s.callbacks.onSelectorChange.call(this):s.callbacks.onUpdate&&"function"==typeof s.callbacks.onUpdate&&s.callbacks.onUpdate.call(this)),X.call(this)}})},scrollTo:function(t,n){if(void 0!==t&&null!=t){var i=h.call(this);return e(i).each(function(){var i=e(this);if(i.data(r)){var s=i.data(r),o=s.opt,u={trigger:"external",scrollInertia:o.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},a=e.extend(!0,{},u,n),f=z.call(this,t),l=a.scrollInertia>0&&a.scrollInertia<17?17:a.scrollInertia;f[0]=W.call(this,f[0],"y"),f[1]=W.call(this,f[1],"x"),a.moveDragger&&(f[0]*=s.scrollRatio.y,f[1]*=s.scrollRatio.x),a.dur=l,setTimeout(function(){null!==f[0]&&void 0!==f[0]&&"x"!==o.axis&&s.overflowed[0]&&(a.dir="y",a.overwrite="all",J(i,""+f[0],a)),null!==f[1]&&void 0!==f[1]&&"y"!==o.axis&&s.overflowed[1]&&(a.dir="x",a.overwrite="none",J(i,""+f[1],a))},a.timeout)}})}},stop:function(){var t=h.call(this);return e(t).each(function(){var t=e(this);t.data(r)&&$(t)})},disable:function(t){var n=h.call(this);return e(n).each(function(){var n=e(this);n.data(r)&&(n.data(r),X.call(this,"remove"),L.call(this),t&&C.call(this),A.call(this,!0),n.addClass(l[3]))})},destroy:function(){var t=h.call(this);return e(t).each(function(){var i=e(this);if(i.data(r)){var s=i.data(r),o=s.opt,u=e("#mCSB_"+s.idx),a=e("#mCSB_"+s.idx+"_container"),f=e(".mCSB_"+s.idx+"_scrollbar");o.live&&d(o.liveSelector||e(t).selector),X.call(this,"remove"),L.call(this),C.call(this),i.removeData(r),Y(this,"mcs"),f.remove(),a.find("img."+l[2]).removeClass(l[2]),u.replaceWith(a.contents()),i.removeClass(n+" _"+r+"_"+s.idx+" "+l[6]+" "+l[7]+" "+l[5]+" "+l[3]).addClass(l[4])}})}},h=function(){return"object"!=typeof e(this)||e(this).length<1?i:this},p=function(t){var n=["rounded","rounded-dark","rounded-dots","rounded-dots-dark"],r=["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"],i=["minimal","minimal-dark"],s=["minimal","minimal-dark"],o=["minimal","minimal-dark"];t.autoDraggerLength=e.inArray(t.theme,n)>-1?!1:t.autoDraggerLength,t.autoExpandScrollbar=e.inArray(t.theme,r)>-1?!1:t.autoExpandScrollbar,t.scrollButtons.enable=e.inArray(t.theme,i)>-1?!1:t.scrollButtons.enable,t.autoHideScrollbar=e.inArray(t.theme,s)>-1?!0:t.autoHideScrollbar,t.scrollbarPosition=e.inArray(t.theme,o)>-1?"outside":t.scrollbarPosition},d=function(e){u[e]&&(clearTimeout(u[e]),Y(u,e))},v=function(e){return"yx"===e||"xy"===e||"auto"===e?"yx":"x"===e||"horizontal"===e?"x":"y"},m=function(e){return"stepped"===e||"pixels"===e||"step"===e||"click"===e?"stepped":"stepless"},g=function(){var t=e(this),i=t.data(r),s=i.opt,o=s.autoExpandScrollbar?" "+l[1]+"_expand":"",u=["<div id='mCSB_"+i.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+i.idx+"_scrollbar mCS-"+s.theme+" mCSB_scrollTools_vertical"+o+"'><div class='"+l[12]+"'><div id='mCSB_"+i.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+i.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+i.idx+"_scrollbar mCS-"+s.theme+" mCSB_scrollTools_horizontal"+o+"'><div class='"+l[12]+"'><div id='mCSB_"+i.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],a="yx"===s.axis?"mCSB_vertical_horizontal":"x"===s.axis?"mCSB_horizontal":"mCSB_vertical",f="yx"===s.axis?u[0]+u[1]:"x"===s.axis?u[1]:u[0],c="yx"===s.axis?"<div id='mCSB_"+i.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",h=s.autoHideScrollbar?" "+l[6]:"",p="x"!==s.axis&&"rtl"===i.langDir?" "+l[7]:"";s.setWidth&&t.css("width",s.setWidth),s.setHeight&&t.css("height",s.setHeight),s.setLeft="y"!==s.axis&&"rtl"===i.langDir?"989999px":s.setLeft,t.addClass(n+" _"+r+"_"+i.idx+h+p).wrapInner("<div id='mCSB_"+i.idx+"' class='mCustomScrollBox mCS-"+s.theme+" "+a+"'><div id='mCSB_"+i.idx+"_container' class='mCSB_container' style='position:relative; top:"+s.setTop+"; left:"+s.setLeft+";' dir="+i.langDir+" /></div>");var d=e("#mCSB_"+i.idx),v=e("#mCSB_"+i.idx+"_container");"y"===s.axis||s.advanced.autoExpandHorizontalScroll||v.css("width",y(v.children())),"outside"===s.scrollbarPosition?("static"===t.css("position")&&t.css("position","relative"),t.css("overflow","visible"),d.addClass("mCSB_outside").after(f)):(d.addClass("mCSB_inside").append(f),v.wrap(c)),w.call(this);var m=[e("#mCSB_"+i.idx+"_dragger_vertical"),e("#mCSB_"+i.idx+"_dragger_horizontal")];m[0].css("min-height",m[0].height()),m[1].css("min-width",m[1].width())},y=function(t){return Math.max.apply(Math,t.map(function(){return e(this).outerWidth(!0)}).get())},b=function(){var t=e(this),n=t.data(r),i=n.opt,s=e("#mCSB_"+n.idx+"_container");i.advanced.autoExpandHorizontalScroll&&"y"!==i.axis&&s.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(s[0].getBoundingClientRect().right+.4)-Math.floor(s[0].getBoundingClientRect().left),position:"relative"}).unwrap()},w=function(){var t=e(this),n=t.data(r),i=n.opt,s=e(".mCSB_"+n.idx+"_scrollbar:first"),o=tt(i.scrollButtons.tabindex)?"tabindex='"+i.scrollButtons.tabindex+"'":"",u=["<a href='#' class='"+l[13]+"' oncontextmenu='return false;' "+o+" />","<a href='#' class='"+l[14]+"' oncontextmenu='return false;' "+o+" />","<a href='#' class='"+l[15]+"' oncontextmenu='return false;' "+o+" />","<a href='#' class='"+l[16]+"' oncontextmenu='return false;' "+o+" />"],a=["x"===i.axis?u[2]:u[0],"x"===i.axis?u[3]:u[1],u[2],u[3]];i.scrollButtons.enable&&s.prepend(a[0]).append(a[1]).next(".mCSB_scrollTools").prepend(a[2]).append(a[3])},E=function(){var t=e(this),n=t.data(r),i=e("#mCSB_"+n.idx),s=t.css("max-height")||"none",o=-1!==s.indexOf("%"),u=t.css("box-sizing");if("none"!==s){var a=o?t.parent().height()*parseInt(s)/100:parseInt(s);"border-box"===u&&(a-=t.innerHeight()-t.height()+(t.outerHeight()-t.innerHeight())),i.css("max-height",Math.round(a))}},S=function(){var t=e(this),n=t.data(r),i=e("#mCSB_"+n.idx),s=e("#mCSB_"+n.idx+"_container"),o=[e("#mCSB_"+n.idx+"_dragger_vertical"),e("#mCSB_"+n.idx+"_dragger_horizontal")],u=[i.height()/s.outerHeight(!1),i.width()/s.outerWidth(!1)],f=[parseInt(o[0].css("min-height")),Math.round(u[0]*o[0].parent().height()),parseInt(o[1].css("min-width")),Math.round(u[1]*o[1].parent().width())],l=a&&f[1]<f[0]?f[0]:f[1],c=a&&f[3]<f[2]?f[2]:f[3];o[0].css({height:l,"max-height":o[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":f[0]+"px"}),o[1].css({width:c,"max-width":o[1].parent().width()-10})},x=function(){var t=e(this),n=t.data(r),i=e("#mCSB_"+n.idx),s=e("#mCSB_"+n.idx+"_container"),o=[e("#mCSB_"+n.idx+"_dragger_vertical"),e("#mCSB_"+n.idx+"_dragger_horizontal")],u=[s.outerHeight(!1)-i.height(),s.outerWidth(!1)-i.width()],a=[u[0]/(o[0].parent().height()-o[0].height()),u[1]/(o[1].parent().width()-o[1].width())];n.scrollRatio={y:a[0],x:a[1]}},T=function(e,t,n){var r=n?l[0]+"_expanded":"",i=e.closest(".mCSB_scrollTools");"active"===t?(e.toggleClass(l[0]+" "+r),i.toggleClass(l[1]),e[0]._draggable=e[0]._draggable?0:1):e[0]._draggable||("hide"===t?(e.removeClass(l[0]),i.removeClass(l[1])):(e.addClass(l[0]),i.addClass(l[1])))},N=function(){var t=e(this),n=t.data(r),i=e("#mCSB_"+n.idx),s=e("#mCSB_"+n.idx+"_container"),o=null==n.overflowed?s.height():s.outerHeight(!1),u=null==n.overflowed?s.width():s.outerWidth(!1);return[o>i.height(),u>i.width()]},C=function(){var t=e(this),n=t.data(r),i=n.opt,s=e("#mCSB_"+n.idx),o=e("#mCSB_"+n.idx+"_container"),u=[e("#mCSB_"+n.idx+"_dragger_vertical"),e("#mCSB_"+n.idx+"_dragger_horizontal")];if($(t),("x"!==i.axis&&!n.overflowed[0]||"y"===i.axis&&n.overflowed[0])&&(u[0].add(o).css("top",0),J(t,"_resetY")),"y"!==i.axis&&!n.overflowed[1]||"x"===i.axis&&n.overflowed[1]){var a=dx=0;"rtl"===n.langDir&&(a=s.width()-o.outerWidth(!1),dx=Math.abs(a/n.scrollRatio.x)),o.css("left",a),u[1].css("left",dx),J(t,"_resetX")}},k=function(){function t(){o=setTimeout(function(){e.event.special.mousewheel?(clearTimeout(o),P.call(n[0])):t()},100)}var n=e(this),i=n.data(r),s=i.opt;if(!i.bindEvents){if(M.call(this),s.contentTouchScroll&&_.call(this),D.call(this),s.mouseWheel.enable){var o;t()}j.call(this),I.call(this),s.advanced.autoScrollOnFocus&&F.call(this),s.scrollButtons.enable&&q.call(this),s.keyboard.enable&&R.call(this),i.bindEvents=!0}},L=function(){var t=e(this),n=t.data(r),i=n.opt,s=r+"_"+n.idx,o=".mCSB_"+n.idx+"_scrollbar",u=e("#mCSB_"+n.idx+",#mCSB_"+n.idx+"_container,#mCSB_"+n.idx+"_container_wrapper,"+o+" ."+l[12]+",#mCSB_"+n.idx+"_dragger_vertical,#mCSB_"+n.idx+"_dragger_horizontal,"+o+">a"),a=e("#mCSB_"+n.idx+"_container");i.advanced.releaseDraggableSelectors&&u.add(e(i.advanced.releaseDraggableSelectors)),n.bindEvents&&(e(document).unbind("."+s),u.each(function(){e(this).unbind("."+s)}),clearTimeout(t[0]._focusTimeout),Y(t[0],"_focusTimeout"),clearTimeout(n.sequential.step),Y(n.sequential,"step"),clearTimeout(a[0].onCompleteTimeout),Y(a[0],"onCompleteTimeout"),n.bindEvents=!1)},A=function(t){var n=e(this),i=n.data(r),s=i.opt,o=e("#mCSB_"+i.idx+"_container_wrapper"),u=o.length?o:e("#mCSB_"+i.idx+"_container"),a=[e("#mCSB_"+i.idx+"_scrollbar_vertical"),e("#mCSB_"+i.idx+"_scrollbar_horizontal")],f=[a[0].find(".mCSB_dragger"),a[1].find(".mCSB_dragger")];"x"!==s.axis&&(i.overflowed[0]&&!t?(a[0].add(f[0]).add(a[0].children("a")).css("display","block"),u.removeClass(l[8]+" "+l[10])):(s.alwaysShowScrollbar?(2!==s.alwaysShowScrollbar&&f[0].css("display","none"),u.removeClass(l[10])):(a[0].css("display","none"),u.addClass(l[10])),u.addClass(l[8]))),"y"!==s.axis&&(i.overflowed[1]&&!t?(a[1].add(f[1]).add(a[1].children("a")).css("display","block"),u.removeClass(l[9]+" "+l[11])):(s.alwaysShowScrollbar?(2!==s.alwaysShowScrollbar&&f[1].css("display","none"),u.removeClass(l[11])):(a[1].css("display","none"),u.addClass(l[11])),u.addClass(l[9]))),i.overflowed[0]||i.overflowed[1]?n.removeClass(l[5]):n.addClass(l[5])},O=function(e){var t=e.type;switch(t){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return e.target.ownerDocument!==document?[e.originalEvent.screenY,e.originalEvent.screenX,!1]:[e.originalEvent.pageY,e.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var n=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],r=e.originalEvent.touches.length||e.originalEvent.changedTouches.length;return e.target.ownerDocument!==document?[n.screenY,n.screenX,r>1]:[n.pageY,n.pageX,r>1];default:return[e.pageY,e.pageX,!1]}},M=function(){function t(e){var t=d.find("iframe");if(t.length){var n=e?"auto":"none";t.css("pointer-events",n)}}function n(e,t,n,r){if(d[0].idleTimer=c.scrollInertia<233?250:0,i.attr("id")===p[1])var s="x",o=(i[0].offsetLeft-t+r)*l.scrollRatio.x;else var s="y",o=(i[0].offsetTop-e+n)*l.scrollRatio.y;J(u,""+o,{dir:s,drag:!0})}var i,s,o,u=e(this),l=u.data(r),c=l.opt,h=r+"_"+l.idx,p=["mCSB_"+l.idx+"_dragger_vertical","mCSB_"+l.idx+"_dragger_horizontal"],d=e("#mCSB_"+l.idx+"_container"),v=e("#"+p[0]+",#"+p[1]),m=c.advanced.releaseDraggableSelectors?v.add(e(c.advanced.releaseDraggableSelectors)):v;v.bind("mousedown."+h+" touchstart."+h+" pointerdown."+h+" MSPointerDown."+h,function(n){if(n.stopImmediatePropagation(),n.preventDefault(),Z(n)){f=!0,a&&(document.onselectstart=function(){return!1}),t(!1),$(u),i=e(this);var r=i.offset(),l=O(n)[0]-r.top,h=O(n)[1]-r.left,p=i.height()+r.top,d=i.width()+r.left;p>l&&l>0&&d>h&&h>0&&(s=l,o=h),T(i,"active",c.autoExpandScrollbar)}}).bind("touchmove."+h,function(e){e.stopImmediatePropagation(),e.preventDefault();var t=i.offset(),r=O(e)[0]-t.top,u=O(e)[1]-t.left;n(s,o,r,u)}),e(document).bind("mousemove."+h+" pointermove."+h+" MSPointerMove."+h,function(e){if(i){var t=i.offset(),r=O(e)[0]-t.top,u=O(e)[1]-t.left;if(s===r)return;n(s,o,r,u)}}).add(m).bind("mouseup."+h+" touchend."+h+" pointerup."+h+" MSPointerUp."+h,function(){i&&(T(i,"active",c.autoExpandScrollbar),i=null),f=!1,a&&(document.onselectstart=null),t(!0)})},_=function(){function n(e){if(!et(e)||f||O(e)[2])return void (t=0);t=1,E=0,S=0,x.removeClass("mCS_touch_action");var n=L.offset();l=O(e)[0]-n.top,c=O(e)[1]-n.left,B=[O(e)[0],O(e)[1]]}function i(e){if(et(e)&&!f&&!O(e)[2]&&(e.stopImmediatePropagation(),!S||E)){v=Q();var t=k.offset(),n=O(e)[0]-t.top,r=O(e)[1]-t.left,i="mcsLinearOut";if(M.push(n),_.push(r),B[2]=Math.abs(O(e)[0]-B[0]),B[3]=Math.abs(O(e)[1]-B[1]),T.overflowed[0])var s=A[0].parent().height()-A[0].height(),o=l-n>0&&n-l>-(s*T.scrollRatio.y)&&(2*B[3]<B[2]||"yx"===N.axis);if(T.overflowed[1])var u=A[1].parent().width()-A[1].width(),h=c-r>0&&r-c>-(u*T.scrollRatio.x)&&(2*B[2]<B[3]||"yx"===N.axis);o||h?(e.preventDefault(),E=1):(S=1,x.addClass("mCS_touch_action")),b="yx"===N.axis?[l-n,c-r]:"x"===N.axis?[null,c-r]:[l-n,null],L[0].idleTimer=250,T.overflowed[0]&&a(b[0],D,i,"y","all",!0),T.overflowed[1]&&a(b[1],D,i,"x",P,!0)}}function s(e){if(!et(e)||f||O(e)[2])return void (t=0);t=1,e.stopImmediatePropagation(),$(x),d=Q();var n=k.offset();h=O(e)[0]-n.top,p=O(e)[1]-n.left,M=[],_=[]}function o(e){if(et(e)&&!f&&!O(e)[2]){e.stopImmediatePropagation(),E=0,S=0,m=Q();var t=k.offset(),n=O(e)[0]-t.top,r=O(e)[1]-t.left;if(30>=m-v){y=1e3/(m-d);var i="mcsEaseOut",s=2.5>y,o=s?[M[M.length-2],_[_.length-2]]:[0,0];g=s?[n-o[0],r-o[1]]:[n-h,r-p];var l=[Math.abs(g[0]),Math.abs(g[1])];y=s?[Math.abs(g[0]/4),Math.abs(g[1]/4)]:[y,y];var c=[Math.abs(L[0].offsetTop)-g[0]*u(l[0]/y[0],y[0]),Math.abs(L[0].offsetLeft)-g[1]*u(l[1]/y[1],y[1])];b="yx"===N.axis?[c[0],c[1]]:"x"===N.axis?[null,c[1]]:[c[0],null],w=[4*l[0]+N.scrollInertia,4*l[1]+N.scrollInertia];var x=parseInt(N.contentTouchScroll)||0;b[0]=l[0]>x?b[0]:0,b[1]=l[1]>x?b[1]:0,T.overflowed[0]&&a(b[0],w[0],i,"y",P,!1),T.overflowed[1]&&a(b[1],w[1],i,"x",P,!1)}}}function u(e,t){var n=[1.5*t,2*t,t/1.5,t/2];return e>90?t>4?n[0]:n[3]:e>60?t>3?n[3]:n[2]:e>30?t>8?n[1]:t>6?n[0]:t>4?t:n[2]:t>8?t:n[3]}function a(e,t,n,r,i,s){e&&J(x,""+e,{dur:t,scrollEasing:n,dir:r,overwrite:i,drag:s})}var l,c,h,p,d,v,m,g,y,b,w,E,S,x=e(this),T=x.data(r),N=T.opt,C=r+"_"+T.idx,k=e("#mCSB_"+T.idx),L=e("#mCSB_"+T.idx+"_container"),A=[e("#mCSB_"+T.idx+"_dragger_vertical"),e("#mCSB_"+T.idx+"_dragger_horizontal")],M=[],_=[],D=0,P="yx"===N.axis?"none":"all",B=[],j=L.find("iframe"),F=["touchstart."+C+" pointerdown."+C+" MSPointerDown."+C,"touchmove."+C+" pointermove."+C+" MSPointerMove."+C,"touchend."+C+" pointerup."+C+" MSPointerUp."+C];L.bind(F[0],function(e){n(e)}).bind(F[1],function(e){i(e)}),k.bind(F[0],function(e){s(e)}).bind(F[2],function(e){o(e)}),j.length&&j.each(function(){e(this).load(function(){H(this)&&e(this.contentDocument||this.contentWindow.document).bind(F[0],function(e){n(e),s(e)}).bind(F[1],function(e){i(e)}).bind(F[2],function(e){o(e)})})})},D=function(){function n(){return window.getSelection?""+window.getSelection():document.selection&&"Control"!=document.selection.type?document.selection.createRange().text:0}function i(e,t,n){l.type=n&&s?"stepped":"stepless",l.scrollAmount=10,U(o,e,t,"mcsLinearOut",n?60:null)}var s,o=e(this),u=o.data(r),a=u.opt,l=u.sequential,c=r+"_"+u.idx,h=e("#mCSB_"+u.idx+"_container"),p=h.parent();h.bind("mousedown."+c,function(){t||s||(s=1,f=!0)}).add(document).bind("mousemove."+c,function(e){if(!t&&s&&n()){var r=h.offset(),o=O(e)[0]-r.top+h[0].offsetTop,f=O(e)[1]-r.left+h[0].offsetLeft;o>0&&o<p.height()&&f>0&&f<p.width()?l.step&&i("off",null,"stepped"):("x"!==a.axis&&u.overflowed[0]&&(0>o?i("on",38):o>p.height()&&i("on",40)),"y"!==a.axis&&u.overflowed[1]&&(0>f?i("on",37):f>p.width()&&i("on",39)))}}).bind("mouseup."+c,function(){t||(s&&(s=0,i("off",null)),f=!1)})},P=function(){function t(t,r){if($(n),!B(n,t.target)){var o="auto"!==s.mouseWheel.deltaFactor?parseInt(s.mouseWheel.deltaFactor):a&&t.deltaFactor<100?100:t.deltaFactor||100;if("x"===s.axis||"x"===s.mouseWheel.axis)var l="x",c=[Math.round(o*i.scrollRatio.x),parseInt(s.mouseWheel.scrollAmount)],h="auto"!==s.mouseWheel.scrollAmount?c[1]:c[0]<u.width()?c[0]:.9*u.width(),p=Math.abs(e("#mCSB_"+i.idx+"_container")[0].offsetLeft),d=f[1][0].offsetLeft,v=f[1].parent().width()-f[1].width(),m=t.deltaX||t.deltaY||r;else var l="y",c=[Math.round(o*i.scrollRatio.y),parseInt(s.mouseWheel.scrollAmount)],h="auto"!==s.mouseWheel.scrollAmount?c[1]:c[0]<u.height()?c[0]:.9*u.height(),p=Math.abs(e("#mCSB_"+i.idx+"_container")[0].offsetTop),d=f[0][0].offsetTop,v=f[0].parent().height()-f[0].height(),m=t.deltaY||r;"y"===l&&!i.overflowed[0]||"x"===l&&!i.overflowed[1]||((s.mouseWheel.invert||t.webkitDirectionInvertedFromDevice)&&(m=-m),s.mouseWheel.normalizeDelta&&(m=0>m?-1:1),(m>0&&0!==d||0>m&&d!==v||s.mouseWheel.preventDefault)&&(t.stopImmediatePropagation(),t.preventDefault()),J(n,""+(p-m*h),{dir:l}))}}if(e(this).data(r)){var n=e(this),i=n.data(r),s=i.opt,o=r+"_"+i.idx,u=e("#mCSB_"+i.idx),f=[e("#mCSB_"+i.idx+"_dragger_vertical"),e("#mCSB_"+i.idx+"_dragger_horizontal")],l=e("#mCSB_"+i.idx+"_container").find("iframe");l.length&&l.each(function(){e(this).load(function(){H(this)&&e(this.contentDocument||this.contentWindow.document).bind("mousewheel."+o,function(e,n){t(e,n)})})}),u.bind("mousewheel."+o,function(e,n){t(e,n)})}},H=function(e){var t=null;try{var n=e.contentDocument||e.contentWindow.document;t=n.body.innerHTML}catch(r){}return null!==t},B=function(t,n){var i=n.nodeName.toLowerCase(),s=t.data(r).opt.mouseWheel.disableOver,o=["select","textarea"];return e.inArray(i,s)>-1&&!(e.inArray(i,o)>-1&&!e(n).is(":focus"))},j=function(){var t=e(this),n=t.data(r),i=r+"_"+n.idx,s=e("#mCSB_"+n.idx+"_container"),o=s.parent(),u=e(".mCSB_"+n.idx+"_scrollbar ."+l[12]);u.bind("touchstart."+i+" pointerdown."+i+" MSPointerDown."+i,function(){f=!0}).bind("touchend."+i+" pointerup."+i+" MSPointerUp."+i,function(){f=!1}).bind("click."+i,function(r){if(e(r.target).hasClass(l[12])||e(r.target).hasClass("mCSB_draggerRail")){$(t);var i=e(this),u=i.find(".mCSB_dragger");if(i.parent(".mCSB_scrollTools_horizontal").length>0){if(!n.overflowed[1])return;var a="x",f=r.pageX>u.offset().left?-1:1,c=Math.abs(s[0].offsetLeft)-.9*f*o.width()}else{if(!n.overflowed[0])return;var a="y",f=r.pageY>u.offset().top?-1:1,c=Math.abs(s[0].offsetTop)-.9*f*o.height()}J(t,""+c,{dir:a,scrollEasing:"mcsEaseInOut"})}})},F=function(){var t=e(this),n=t.data(r),i=n.opt,s=r+"_"+n.idx,o=e("#mCSB_"+n.idx+"_container"),u=o.parent();o.bind("focusin."+s,function(){var n=e(document.activeElement),r=o.find(".mCustomScrollBox").length,s=0;n.is(i.advanced.autoScrollOnFocus)&&($(t),clearTimeout(t[0]._focusTimeout),t[0]._focusTimer=r?(s+17)*r:0,t[0]._focusTimeout=setTimeout(function(){var e=[nt(n)[0],nt(n)[1]],r=[o[0].offsetTop,o[0].offsetLeft],a=[r[0]+e[0]>=0&&r[0]+e[0]<u.height()-n.outerHeight(!1),r[1]+e[1]>=0&&r[0]+e[1]<u.width()-n.outerWidth(!1)],f="yx"!==i.axis||a[0]||a[1]?"all":"none";"x"===i.axis||a[0]||J(t,""+e[0],{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:f,dur:s}),"y"===i.axis||a[1]||J(t,""+e[1],{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:f,dur:s})},t[0]._focusTimer))})},I=function(){var t=e(this),n=t.data(r),i=r+"_"+n.idx,s=e("#mCSB_"+n.idx+"_container").parent();s.bind("scroll."+i,function(){(0!==s.scrollTop()||0!==s.scrollLeft())&&e(".mCSB_"+n.idx+"_scrollbar").css("visibility","hidden")})},q=function(){var t=e(this),n=t.data(r),i=n.opt,s=n.sequential,o=r+"_"+n.idx,u=".mCSB_"+n.idx+"_scrollbar",a=e(u+">a");a.bind("mousedown."+o+" touchstart."+o+" pointerdown."+o+" MSPointerDown."+o+" mouseup."+o+" touchend."+o+" pointerup."+o+" MSPointerUp."+o+" mouseout."+o+" pointerout."+o+" MSPointerOut."+o+" click."+o,function(r){function o(e,n){s.scrollAmount=i.snapAmount||i.scrollButtons.scrollAmount,U(t,e,n)}if(r.preventDefault(),Z(r)){var u=e(this).attr("class");switch(s.type=i.scrollButtons.scrollType,r.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===s.type)return;f=!0,n.tweenRunning=!1,o("on",u);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===s.type)return;f=!1,s.dir&&o("off",u);break;case"click":if("stepped"!==s.type||n.tweenRunning)return;o("on",u)}}})},R=function(){function t(t){function r(e,t){o.type=s.keyboard.scrollType,o.scrollAmount=s.snapAmount||s.keyboard.scrollAmount,"stepped"===o.type&&i.tweenRunning||U(n,e,t)}switch(t.type){case"blur":i.tweenRunning&&o.dir&&r("off",null);break;case"keydown":case"keyup":var u=t.keyCode?t.keyCode:t.which,a="on";if("x"!==s.axis&&(38===u||40===u)||"y"!==s.axis&&(37===u||39===u)){if((38===u||40===u)&&!i.overflowed[0]||(37===u||39===u)&&!i.overflowed[1])return;"keyup"===t.type&&(a="off"),e(document.activeElement).is(c)||(t.preventDefault(),t.stopImmediatePropagation(),r(a,u))}else if(33===u||34===u){if((i.overflowed[0]||i.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"===t.type){$(n);var h=34===u?-1:1;if("x"===s.axis||"yx"===s.axis&&i.overflowed[1]&&!i.overflowed[0])var p="x",d=Math.abs(f[0].offsetLeft)-.9*h*l.width();else var p="y",d=Math.abs(f[0].offsetTop)-.9*h*l.height();J(n,""+d,{dir:p,scrollEasing:"mcsEaseInOut"})}}else if((35===u||36===u)&&!e(document.activeElement).is(c)&&((i.overflowed[0]||i.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"===t.type)){if("x"===s.axis||"yx"===s.axis&&i.overflowed[1]&&!i.overflowed[0])var p="x",d=35===u?Math.abs(l.width()-f.outerWidth(!1)):0;else var p="y",d=35===u?Math.abs(l.height()-f.outerHeight(!1)):0;J(n,""+d,{dir:p,scrollEasing:"mcsEaseInOut"})}}}var n=e(this),i=n.data(r),s=i.opt,o=i.sequential,u=r+"_"+i.idx,a=e("#mCSB_"+i.idx),f=e("#mCSB_"+i.idx+"_container"),l=f.parent(),c="input,textarea,select,datalist,keygen,[contenteditable='true']",h=f.find("iframe"),p=["blur."+u+" keydown."+u+" keyup."+u];h.length&&h.each(function(){e(this).load(function(){H(this)&&e(this.contentDocument||this.contentWindow.document).bind(p[0],function(e){t(e)})})}),a.attr("tabindex","0").bind(p[0],function(e){t(e)})},U=function(t,n,i,s,o){function u(e){var n="stepped"!==h.type,r=o?o:e?n?v/1.5:m:1e3/60,i=e?n?7.5:40:2.5,a=[Math.abs(p[0].offsetTop),Math.abs(p[0].offsetLeft)],l=[f.scrollRatio.y>10?10:f.scrollRatio.y,f.scrollRatio.x>10?10:f.scrollRatio.x],c="x"===h.dir[0]?a[1]+h.dir[1]*l[1]*i:a[0]+h.dir[1]*l[0]*i,d="x"===h.dir[0]?a[1]+h.dir[1]*parseInt(h.scrollAmount):a[0]+h.dir[1]*parseInt(h.scrollAmount),g="auto"!==h.scrollAmount?d:c,y=s?s:e?n?"mcsLinearOut":"mcsEaseInOut":"mcsLinear",b=e?!0:!1;return e&&17>r&&(g="x"===h.dir[0]?a[1]:a[0]),J(t,""+g,{dir:h.dir[0],scrollEasing:y,dur:r,onComplete:b}),e?void (h.dir=!1):(clearTimeout(h.step),void (h.step=setTimeout(function(){u()},r)))}function a(){clearTimeout(h.step),Y(h,"step"),$(t)}var f=t.data(r),c=f.opt,h=f.sequential,p=e("#mCSB_"+f.idx+"_container"),d="stepped"===h.type?!0:!1,v=c.scrollInertia<26?26:c.scrollInertia,m=c.scrollInertia<1?17:c.scrollInertia;switch(n){case"on":if(h.dir=[i===l[16]||i===l[15]||39===i||37===i?"x":"y",i===l[13]||i===l[15]||38===i||37===i?-1:1],$(t),tt(i)&&"stepped"===h.type)return;u(d);break;case"off":a(),(d||f.tweenRunning&&h.dir)&&u(!0)}},z=function(t){var n=e(this).data(r).opt,i=[];return"function"==typeof t&&(t=t()),t instanceof Array?i=t.length>1?[t[0],t[1]]:"x"===n.axis?[null,t[0]]:[t[0],null]:(i[0]=t.y?t.y:t.x||"x"===n.axis?null:t,i[1]=t.x?t.x:t.y||"y"===n.axis?null:t),"function"==typeof i[0]&&(i[0]=i[0]()),"function"==typeof i[1]&&(i[1]=i[1]()),i},W=function(t,n){if(null!=t&&void 0!==t){var i=e(this),s=i.data(r),o=s.opt,u=e("#mCSB_"+s.idx+"_container"),a=u.parent(),f=typeof t;n||(n="x"===o.axis?"x":"y");var l="x"===n?u.outerWidth(!1):u.outerHeight(!1),h="x"===n?u[0].offsetLeft:u[0].offsetTop,p="x"===n?"left":"top";switch(f){case"function":return t();case"object":var d=t.jquery?t:e(t);if(!d.length)return;return"x"===n?nt(d)[1]:nt(d)[0];case"string":case"number":if(tt(t))return Math.abs(t);if(-1!==t.indexOf("%"))return Math.abs(l*parseInt(t)/100);if(-1!==t.indexOf("-="))return Math.abs(h-parseInt(t.split("-=")[1]));if(-1!==t.indexOf("+=")){var v=h+parseInt(t.split("+=")[1]);return 0>v?Math.abs(v):0}if(-1!==t.indexOf("px")&&tt(t.split("px")[0]))return Math.abs(t.split("px")[0]);if("top"===t||"left"===t)return 0;if("bottom"===t)return Math.abs(a.height()-u.outerHeight(!1));if("right"===t)return Math.abs(a.width()-u.outerWidth(!1));if("first"===t||"last"===t){var d=u.find(":"+t);return"x"===n?nt(d)[1]:nt(d)[0]}return e(t).length?"x"===n?nt(e(t))[1]:nt(e(t))[0]:(u.css(p,t),void c.update.call(null,i[0]))}}},X=function(t){function n(){return clearTimeout(p[0].autoUpdate),0===a.parents("html").length?void (a=null):void (p[0].autoUpdate=setTimeout(function(){return h.advanced.updateOnSelectorChange&&(d=o(),d!==w)?(u(3),void (w=d)):(h.advanced.updateOnContentResize&&(v=[p.outerHeight(!1),p.outerWidth(!1),g.height(),g.width(),b()[0],b()[1]],(v[0]!==E[0]||v[1]!==E[1]||v[2]!==E[2]||v[3]!==E[3]||v[4]!==E[4]||v[5]!==E[5])&&(u(v[0]!==E[0]||v[1]!==E[1]),E=v)),h.advanced.updateOnImageLoad&&(m=i(),m!==S&&(p.find("img").each(function(){s(this)}),S=m)),void ((h.advanced.updateOnSelectorChange||h.advanced.updateOnContentResize||h.advanced.updateOnImageLoad)&&n()))},h.advanced.autoUpdateTimeout))}function i(){var e=0;return h.advanced.updateOnImageLoad&&(e=p.find("img").length),e}function s(t){function n(e,t){return function(){return t.apply(e,arguments)}}function r(){this.onload=null,e(t).addClass(l[2]),u(2)}if(e(t).hasClass(l[2]))return void u();var i=new Image;i.onload=n(i,r),i.src=t.src}function o(){h.advanced.updateOnSelectorChange===!0&&(h.advanced.updateOnSelectorChange="*");var t=0,n=p.find(h.advanced.updateOnSelectorChange);return h.advanced.updateOnSelectorChange&&n.length>0&&n.each(function(){t+=e(this).height()+e(this).width()}),t}function u(e){clearTimeout(p[0].autoUpdate),c.update.call(null,a[0],e)}var a=e(this),f=a.data(r),h=f.opt,p=e("#mCSB_"+f.idx+"_container");if(t)return clearTimeout(p[0].autoUpdate),void Y(p[0],"autoUpdate");var d,v,m,g=p.parent(),y=[e("#mCSB_"+f.idx+"_scrollbar_vertical"),e("#mCSB_"+f.idx+"_scrollbar_horizontal")],b=function(){return[y[0].is(":visible")?y[0].outerHeight(!0):0,y[1].is(":visible")?y[1].outerWidth(!0):0]},w=o(),E=[p.outerHeight(!1),p.outerWidth(!1),g.height(),g.width(),b()[0],b()[1]],S=i();n()},V=function(e,t,n){return Math.round(e/t)*t-n},$=function(t){var n=t.data(r),i=e("#mCSB_"+n.idx+"_container,#mCSB_"+n.idx+"_container_wrapper,#mCSB_"+n.idx+"_dragger_vertical,#mCSB_"+n.idx+"_dragger_horizontal");i.each(function(){G.call(this)})},J=function(t,n,i){function s(e){return a&&f.callbacks[e]&&"function"==typeof f.callbacks[e]}function o(){return[f.callbacks.alwaysTriggerOffsets||b>=w[0]+S,f.callbacks.alwaysTriggerOffsets||-x>=b]}function u(){var e=[p[0].offsetTop,p[0].offsetLeft],n=[g[0].offsetTop,g[0].offsetLeft],r=[p.outerHeight(!1),p.outerWidth(!1)],s=[h.height(),h.width()];t[0].mcs={content:p,top:e[0],left:e[1],draggerTop:n[0],draggerLeft:n[1],topPct:Math.round(100*Math.abs(e[0])/(Math.abs(r[0])-s[0])),leftPct:Math.round(100*Math.abs(e[1])/(Math.abs(r[1])-s[1])),direction:i.dir}}var a=t.data(r),f=a.opt,l={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:f.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},i=e.extend(l,i),c=[i.dur,i.drag?0:i.dur],h=e("#mCSB_"+a.idx),p=e("#mCSB_"+a.idx+"_container"),d=p.parent(),v=f.callbacks.onTotalScrollOffset?z.call(t,f.callbacks.onTotalScrollOffset):[0,0],m=f.callbacks.onTotalScrollBackOffset?z.call(t,f.callbacks.onTotalScrollBackOffset):[0,0];if(a.trigger=i.trigger,(0!==d.scrollTop()||0!==d.scrollLeft())&&(e(".mCSB_"+a.idx+"_scrollbar").css("visibility","visible"),d.scrollTop(0).scrollLeft(0)),"_resetY"!==n||a.contentReset.y||(s("onOverflowYNone")&&f.callbacks.onOverflowYNone.call(t[0]),a.contentReset.y=1),"_resetX"!==n||a.contentReset.x||(s("onOverflowXNone")&&f.callbacks.onOverflowXNone.call(t[0]),a.contentReset.x=1),"_resetY"!==n&&"_resetX"!==n){switch(!a.contentReset.y&&t[0].mcs||!a.overflowed[0]||(s("onOverflowY")&&f.callbacks.onOverflowY.call(t[0]),a.contentReset.x=null),!a.contentReset.x&&t[0].mcs||!a.overflowed[1]||(s("onOverflowX")&&f.callbacks.onOverflowX.call(t[0]),a.contentReset.x=null),f.snapAmount&&(n=V(n,f.snapAmount,f.snapOffset)),i.dir){case"x":var g=e("#mCSB_"+a.idx+"_dragger_horizontal"),y="left",b=p[0].offsetLeft,w=[h.width()-p.outerWidth(!1),g.parent().width()-g.width()],E=[n,0===n?0:n/a.scrollRatio.x],S=v[1],x=m[1],N=S>0?S/a.scrollRatio.x:0,C=x>0?x/a.scrollRatio.x:0;break;case"y":var g=e("#mCSB_"+a.idx+"_dragger_vertical"),y="top",b=p[0].offsetTop,w=[h.height()-p.outerHeight(!1),g.parent().height()-g.height()],E=[n,0===n?0:n/a.scrollRatio.y],S=v[0],x=m[0],N=S>0?S/a.scrollRatio.y:0,C=x>0?x/a.scrollRatio.y:0}E[1]<0||0===E[0]&&0===E[1]?E=[0,0]:E[1]<w[1]?E[0]=-E[0]:E=[w[0],w[1]],t[0].mcs||(u(),s("onInit")&&f.callbacks.onInit.call(t[0])),clearTimeout(p[0].onCompleteTimeout),(a.tweenRunning||(0!==b||E[0]<0)&&(b!==w[0]||E[0]>w[0]))&&(K(g[0],y,Math.round(E[1]),c[1],i.scrollEasing),K(p[0],y,Math.round(E[0]),c[0],i.scrollEasing,i.overwrite,{onStart:function(){i.callbacks&&i.onStart&&!a.tweenRunning&&(s("onScrollStart")&&(u(),f.callbacks.onScrollStart.call(t[0])),a.tweenRunning=!0,T(g),a.cbOffsets=o())},onUpdate:function(){i.callbacks&&i.onUpdate&&s("whileScrolling")&&(u(),f.callbacks.whileScrolling.call(t[0]))},onComplete:function(){if(i.callbacks&&i.onComplete){"yx"===f.axis&&clearTimeout(p[0].onCompleteTimeout);var e=p[0].idleTimer||0;p[0].onCompleteTimeout=setTimeout(function(){s("onScroll")&&(u(),f.callbacks.onScroll.call(t[0])),s("onTotalScroll")&&E[1]>=w[1]-N&&a.cbOffsets[0]&&(u(),f.callbacks.onTotalScroll.call(t[0])),s("onTotalScrollBack")&&E[1]<=C&&a.cbOffsets[1]&&(u(),f.callbacks.onTotalScrollBack.call(t[0])),a.tweenRunning=!1,p[0].idleTimer=0,T(g,"hide")},e)}}}))}},K=function(e,t,n,r,i,s,o){function u(){E.stop||(y||d.call(),y=Q()-g,a(),y<E.time||(E.time=y>E.time?y+h-(y-E.time):y+h-1,E.time<y+1&&(E.time=y+1)),E.time<r?E.id=p(u):m.call())}function a(){r>0?(E.currVal=c(E.time,b,S,r,i),w[t]=Math.round(E.currVal)+"px"):w[t]=n+"px",v.call()}function f(){h=1e3/60,E.time=y+h,p=window.requestAnimationFrame?window.requestAnimationFrame:function(e){return a(),setTimeout(e,.01)},E.id=p(u)}function l(){null!=E.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(E.id):clearTimeout(E.id),E.id=null)}function c(e,t,n,r,i){switch(i){case"linear":case"mcsLinear":return n*e/r+t;case"mcsLinearOut":return e/=r,e--,n*Math.sqrt(1-e*e)+t;case"easeInOutSmooth":return e/=r/2,1>e?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t);case"easeInOutStrong":return e/=r/2,1>e?n/2*Math.pow(2,10*(e-1))+t:(e--,n/2*(-Math.pow(2,-10*e)+2)+t);case"easeInOut":case"mcsEaseInOut":return e/=r/2,1>e?n/2*e*e*e+t:(e-=2,n/2*(e*e*e+2)+t);case"easeOutSmooth":return e/=r,e--,-n*(e*e*e*e-1)+t;case"easeOutStrong":return n*(-Math.pow(2,-10*e/r)+1)+t;case"easeOut":case"mcsEaseOut":default:var s=(e/=r)*e,o=s*e;return t+n*(.499999999999997*o*s+ -2.5*s*s+5.5*o+ -6.5*s+4*e)}}e._mTween||(e._mTween={top:{},left:{}});var h,p,o=o||{},d=o.onStart||function(){},v=o.onUpdate||function(){},m=o.onComplete||function(){},g=Q(),y=0,b=e.offsetTop,w=e.style,E=e._mTween[t];"left"===t&&(b=e.offsetLeft);var S=n-b;E.stop=0,"none"!==s&&l(),f()},Q=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},G=function(){var e=this;e._mTween||(e._mTween={top:{},left:{}});for(var t=["top","left"],n=0;n<t.length;n++){var r=t[n];e._mTween[r].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(e._mTween[r].id):clearTimeout(e._mTween[r].id),e._mTween[r].id=null,e._mTween[r].stop=1)}},Y=function(e,t){try{delete e[t]}catch(n){e[t]=null}},Z=function(e){return!e.which||1===e.which},et=function(e){var t=e.originalEvent.pointerType;return!t||"touch"===t||2===t},tt=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},nt=function(e){var t=e.parents(".mCSB_container");return[e.offset().top-t.offset().top,e.offset().left-t.offset().left]};e.fn[n]=function(t){return c[t]?c[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist"):c.init.apply(this,arguments)},e[n]=function(t){return c[t]?c[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist"):c.init.apply(this,arguments)},e[n].defaults=s,window[n]=!0,e(window).load(function(){e(i)[n](),e.extend(e.expr[":"],{mcsInView:e.expr[":"].mcsInView||function(t){var n,r,i=e(t),s=i.parents(".mCSB_container");if(s.length)return n=s.parent(),r=[s[0].offsetTop,s[0].offsetLeft],r[0]+nt(i)[0]>=0&&r[0]+nt(i)[0]<n.height()-i.outerHeight(!1)&&r[1]+nt(i)[1]>=0&&r[1]+nt(i)[1]<n.width()-i.outerWidth(!1)},mcsOverflow:e.expr[":"].mcsOverflow||function(t){var n=e(t).data(r);if(n)return n.overflowed[0]||n.overflowed[1]}})})})}),define("jquery.mCustomScrollbar.min",function(){}),!function(e){"use strict";var t=function(t,n){this.el=e(t),this.options=e.extend({},e.fn.typed.defaults,n),this.isInput=this.el.is("input"),this.attr=this.options.attr,this.showCursor=this.isInput?!1:this.options.showCursor,this.elContent=this.attr?this.el.attr(this.attr):this.el.text(),this.contentType=this.options.contentType,this.typeSpeed=this.options.typeSpeed,this.startDelay=this.options.startDelay,this.backSpeed=this.options.backSpeed,this.backDelay=this.options.backDelay,this.stringsElement=this.options.stringsElement,this.strings=this.options.strings,this.strPos=0,this.arrayPos=0,this.stopNum=0,this.loop=this.options.loop,this.loopCount=this.options.loopCount,this.curLoop=0,this.stop=!1,this.cursorChar=this.options.cursorChar,this.shuffle=this.options.shuffle,this.sequence=[],this.build()};t.prototype={constructor:t,init:function(){var e=this;e.timeout=setTimeout(function(){for(var t=0;t<e.strings.length;++t)e.sequence[t]=t;e.shuffle&&(e.sequence=e.shuffleArray(e.sequence)),e.typewrite(e.strings[e.sequence[e.arrayPos]],e.strPos)},e.startDelay)},build:function(){var t=this;this.showCursor===!0&&(this.cursor=e('<span class="typed-cursor">'+this.cursorChar+"</span>"),this.el.after(this.cursor));if(this.stringsElement){t.strings=[],this.stringsElement.hide();var n=this.stringsElement.find("p");e.each(n,function(n,r){t.strings.push(e(r).html())})}this.init()},typewrite:function(e,t){if(this.stop===!0)return;var n=Math.round(Math.random()*70)+this.typeSpeed,r=this;r.timeout=setTimeout(function(){var n=0,i=e.substr(t);if(i.charAt(0)==="^"){var s=1;/^\^\d+/.test(i)&&(i=/\d+/.exec(i)[0],s+=i.length,n=parseInt(i)),e=e.substring(0,t)+e.substring(t+s)}if(r.contentType==="html"){var o=e.substr(t).charAt(0);if(o==="<"||o==="&"){var u="",a="";o==="<"?a=">":a=";";while(e.substr(t).charAt(0)!==a)u+=e.substr(t).charAt(0),t++;t++,u+=a}}r.timeout=setTimeout(function(){if(t===e.length){r.options.onStringTyped(r.arrayPos);if(r.arrayPos===r.strings.length-1){r.options.callback(),r.curLoop++;if(r.loop===!1||r.curLoop===r.loopCount)return}r.timeout=setTimeout(function(){r.backspace(e,t)},r.backDelay)}else{t===0&&r.options.preStringTyped(r.arrayPos);var n=e.substr(0,t+1);r.attr?r.el.attr(r.attr,n):r.isInput?r.el.val(n):r.contentType==="html"?r.el.html(n):r.el.text(n),t++,r.typewrite(e,t)}},n)},n)},backspace:function(e,t){if(this.stop===!0)return;var n=Math.round(Math.random()*70)+this.backSpeed,r=this;r.timeout=setTimeout(function(){if(r.contentType==="html"&&e.substr(t).charAt(0)===">"){var n="";while(e.substr(t).charAt(0)!=="<")n-=e.substr(t).charAt(0),t--;t--,n+="<"}var i=e.substr(0,t);r.attr?r.el.attr(r.attr,i):r.isInput?r.el.val(i):r.contentType==="html"?r.el.html(i):r.el.text(i),t>r.stopNum?(t--,r.backspace(e,t)):t<=r.stopNum&&(r.arrayPos++,r.arrayPos===r.strings.length?(r.arrayPos=0,r.shuffle&&(r.sequence=r.shuffleArray(r.sequence)),r.init()):r.typewrite(r.strings[r.sequence[r.arrayPos]],t))},n)},shuffleArray:function(e){var t,n,r=e.length;if(r)while(--r)n=Math.floor(Math.random()*(r+1)),t=e[n],e[n]=e[r],e[r]=t;return e},reset:function(){var e=this;clearInterval(e.timeout);var t=this.el.attr("id");this.el.after('<span id="'+t+'"/>'),this.el.remove(),typeof this.cursor!="undefined"&&this.cursor.remove(),e.options.resetCallback()}},e.fn.typed=function(n){return this.each(function(){var r=e(this),i=r.data("typed"),s=typeof n=="object"&&n;i||r.data("typed",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.typed.defaults={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,shuffle:!1,backDelay:500,loop:!1,loopCount:!1,showCursor:!0,cursorChar:"|",attr:null,contentType:"html",callback:function(){},preStringTyped:function(){},onStringTyped:function(){},resetCallback:function(){}}}(window.jQuery),define("type",function(){}),requirejs(["PxLoaderImage","PxLoaderSound","jquery.mCustomScrollbar.min","type"],function(){(function(a){var x=1,p=0,t=new PxLoader,h=["ring","typing","ambulance"],k=new TimelineMax({repeat:-1}),q=!1;soundManager.setup({url:"swf/",flashVersion:9,useHighPerformance:!0,flashLoadTimeout:500,debugMode:!1,onready:function(){for(var e=0;e<h.length;e++){url="swf/audio/"+h[e]+".mp3";if(!soundManager.canPlayURL(url)&&(url="audio/"+h[e]+".ogg",!soundManager.canPlayURL(url)))continue;t.addSound(h[e],url)}setTimeout(function(){t.start()},100)},ontimeout:function(){soundManager.useHTML5Audio=!0,soundManager.preferFlash=!1,soundManager.reboot()},defaultOptions:{volume:1}}),a(function(){var h={landing_bg:"landing_bg.jpg",title_bg:"game_title.png",phone2_bg:"bg/phone2_bg.jpg","#1":"input_focus_bg.png","#2":"bg/inside_apartment.jpg","#3":"question.png","#4":"pattern.png","#5":"sp.png",".panel":"panel.png","#7":"option1.png","#71":"option2.png","#8":"bg/outside_apartment_with_cops.jpg","#9":"excellent.png","#10":"fail.png","#11":"bg/outside_apartment.jpg","#12":"bg/police_station_blur.jpg","#13":"bg/police_station.jpg"},B=a("#progress").text("0 / 100"),C=a("#bar"),u;for(u in h){var y=new PxLoaderImage("images/"+h[u]);y.imageName=u,t.add(y)}t.addProgressListener(function(e){if(e.resource.imageName&&"#"!=e.resource.imageName[0]&&"audio"!=e.resource.imageName){var t=a(("."==e.resource.imageName[0]?"":"#")+e.resource.imageName);1<=t.length&&t.attr("src",e.resource.img.src)}B.text(parseInt(100*e.completedCount/e.totalCount)+" / 100"),C.css("width",e.completedCount/e.totalCount*100+"%"),e.completedCount==e.totalCount&&(a("#loading").fadeOut(),a("body").addClass("loaded"),r.resume())});var r=new TimelineMax;r.from("#page1 .s1:nth-child(odd)",.6,{y:40,opacity:0,ease:Power2.easeInOut},"start"),r.from("#page1 .s1:nth-child(even)",.6,{y:40,opacity:0,ease:Power2.easeInOut},.1,"start"),r.from("#page1 .btn-wrapper",.6,{y:40,opacity:0,ease:Power2.easeInOut},.2,"start"),r.pause();var m=new TimelineMax({onComplete:function(){a("#pcid").focus()}});m.to("#page1 .intro",.6,{x:-300,opacity:0,ease:Power2.easeInOut},"start"),m.fromTo("#page1 .step2",.6,{x:0,opacity:0},{x:-300,opacity:1,ease:Power2.easeInOut},.1,"start"),m.to("#title_bg",.6,{y:20,ease:Power2.easeInOut},.2,"start"),m.to("#page1 .btn-wrapper",.6,{y:-50,ease:Power2.easeInOut},.2,"start"),m.pause();var D=function(e){return 0<=e.indexOf(a(".page.active .option.on").data("value"))?!0:!1},E=function(e){var t=0;return a(".page.active").find(".mc.on").each(function(){0<=e.indexOf(a(this).data("value"))?t++:t--}),t},z=function(e,t,n){var r=a(e),i=a(t),s=new TimelineMax({onComplete:function(){n&&n.call()}});s.to(t+" .bg",1,{opacity:.5},"start"),s.from(t+" .glow-box",.5,{width:0,opacity:0},"start+=1"),s.from(t+" .e1:nth-child(odd)",.6,{y:40,opacity:0,ease:Power2.easeInOut},"start+=1.3"),s.from(t+" .e1:nth-child(even)",.6,{y:40,opacity:0,ease:Power2.easeInOut},"start+=1.4"),s.pause(),i.addClass("next"),ga("send","event","Page",t,"label"),r.fadeOut(400,function(){a(this).removeClass("active"),i.addClass("active").removeClass("next"),s.resume(),1==i.find(".scrollable").length&&i.find(".scrollable").mCustomScrollbar({mouseWheel:{enable:!0}}),q=!1,1==r.find(".scrollable").length&&r.find(".scrollable").mCustomScrollbar("destroy")})},v=function(b,c,d,e){var g=a(b),f=a(c);f.addClass("next").addClass(d),ga("send","event","Page",c,d),g.fadeOut(400,function(){a(this).removeClass("active"),f.addClass("active").removeClass("next"),1==f.find(".scrollable").length&&f.find(".scrollable").mCustomScrollbar({mouseWheel:{enable:!0}}),x++,a("#gamebar .progress .s"+x).addClass("on"),F(eval(p+e)),G(c,e),q=!1,1==g.find(".scrollable").length&&g.find(".scrollable").mCustomScrollbar("destroy")})},G=function(e,t){var n=new TimelineLite,r=a(e+" .score_update").html(t);TweenLite.set(r,{scale:.5}),n.fromTo(r,.25,{opacity:0},{opacity:1,ease:Power1.easeInOut},"start"),n.fromTo(r,1,{x:0,y:0},{x:20,y:-60,scale:1,ease:Power1.easeIn},"start"),n.to(r,.25,{opacity:0,ease:Power2.easeInOut},.75,"start"),n.restart(),l.update(parseInt(t))},l={interval:5,grades:[{score:100,grade:"散仔"},{score:120,grade:"高級警員"},{score:140,grade:"警長"},{score:210,grade:"督察"}],update:function(e){var t=Math.abs(e),n=setInterval(function(){if(0>=t-l.interval&&(clearInterval(n),0>=t))return;t-=l.interval,0<e?w(p+l.interval):w(p-l.interval)},100)}},A=function(){return a(".page.active .option.on").length},F=function(e){a(l.grades).each(function(t,n){if(e<=n.score)return a("#page19 .grade").html(n.grade),!1})},w=function(e){e=Math.floor(e);if(25>e){var t=-90+e/100*360;a(".animate-0-25-b").css("transform","rotate("+t+"deg)")}else 25<=e&&50>e?(t=-90+(e-25)/100*360,a(".animate-0-25-b").css("transform","rotate(0deg)"),a(".animate-25-50-b").css("transform","rotate("+t+"deg)")):50<=e&&75>e?(t=-90+(e-50)/100*360,a(".animate-25-50-b, .animate-0-25-b").css("transform","rotate(0deg)"),a(".animate-50-75-b").css("transform","rotate("+t+"deg)")):75<=e&&100>=e&&(t=-90+(e-75)/100*360,a(".animate-50-75-b, .animate-25-50-b, .animate-0-25-b").css("transform","rotate(0deg)"),a(".animate-75-100-b").css("transform","rotate("+t+"deg)"));p=e,a("#game_score, #page19 .final_score span").html(e+"")},n={timer:null,start:function(e,t){n.timer=setInterval(function(){1<=t?(t--,e.text(t+":00")):(a("body").trigger("timesup"),n.stop())},1e3)},stop:function(){clearInterval(n.timer),n.timer=null}},H={init:function(e,t){a(e).typed({strings:t,typeSpeed:0,callback:function(){soundManager.stop("typing")}}),soundManager.play("typing",{onfinish:function(){}})}};a("#startgame_btn").bind("click",function(e){e.preventDefault(),a(this).hasClass("page2")?1<=a("#pcid").val().length?(a("#calling span").text(a("#pcid").val()),z("#page1","#page2"),TweenLite.fromTo("#gamebar",.3,{marginTop:"-40px",opacity:0},{marginTop:0,opacity:1}),w("50"),soundManager.play("ring",{onfinish:function(){}})):alert(warning_copy2):(m.resume(),a(this).addClass("page2"))}),a(".next-btn, #answer_call").bind("click",function(e){e.preventDefault();if(!q){q=!0,soundManager.stopAll(),e=function(){};var t=a(this).attr("href"),r=a(t);k.pause();if(r.hasClass("resultpage")){if(!(a(this).hasClass("timesup")||1<=a(".page.active .option.on").length)){alert(warning_copy),q=!1;return}a(this).parents(".page:first").hasClass("timelimited")&&n.stop();if(!r.hasClass("mc")){D(a(this).data("ans"))?v(".page.active",t,"correct","+10"):v(".page.active",t,"fail","-10");return}var r=a(this).data("ans"),i=E(r),i=0<=i?"+"+10*i:10*i;v(".page.active",t,i=="+"+10*r.length?"correct":"fail",i)}else if(r.hasClass("intro")){var s=a(t+" .glow-box").data("msg");e=function(){H.init(t+" .glow-box span",[s])}}else if(r.hasClass("timelimited")){var o=r.find(".timer .cur"),u=parseInt(r.data("time"));e=function(){n.start(o,u),a("body").bind("timesup",function(){a("body").unbind("timesup"),a(".page.active").find(".btn").addClass("timesup").trigger("click")})}}else r.hasClass("ranking")?TweenLite.to("#gamebar",.3,{marginTop:"-40px",opacity:0}):"#page6"==t&&(soundManager.play("ambulance"),setTimeout(function(){soundManager.stop("ambulance")},3100));z(".page.active",t,e)}}),a("body").delegate(".option","click",function(e){e.preventDefault(),a(this).hasClass("mc")?(a(this).toggleClass("on"),1<=A()?(a(".page.active .next-btn").removeClass("disabled"),TweenLite.to(a(".page.active .next-btn"),.2,{opacity:1})):(a(".page.active .next-btn").addClass("disabled"),TweenLite.to(a(".page.active .next-btn"),.2,{opacity:.5}))):(a(this).hasClass("on")||a(".page.active .option.on").removeClass("on"),a(this).toggleClass("on"),1==A()?(a(".page.active .next-btn").removeClass("disabled"),TweenLite.to(a(".page.active .next-btn"),.2,{opacity:1})):(a(".page.active .next-btn").addClass("disabled"),TweenLite.to(a(".page.active .next-btn"),.2,{opacity:.5})))}).delegate(".tt-share","click",function(e){return e.preventDefault(),title=document.title,url="https://twitter.com/share?url="+window.location.href+encodeURIComponent("?utm_source=twitter&utm_medium=share&utm_campaign=crime")+"&text="+encodeURIComponent(title)+";via=initiumnews",window.open(url,"name","height=400,width=650"),!1}).delegate(".fb-share","click",function(e){e.preventDefault(),a(this).hasClass("share-btn")?a(l.grades).each(function(e,t){if(p<=t.score){var n=window.location.protocol+"//"+window.location.host+window.location.pathname.replace(/[^\\\/]*$/,"")+"share"+e+".html";return window.open("https://www.facebook.com/sharer.php?s=100&u="+n+"?shared","","menubar=no,toolbar=no,resizable=yes,scrollbars=no,height=368,width=600"),!1}}):window.open("https://www.facebook.com/sharer.php?s=100&u="+window.location.href+"?shared","","menubar=no,toolbar=no,resizable=yes,scrollbars=no,height=368,width=600")}),k.fromTo("#startgame_btn .a1",.5,{opacity:.2},{opacity:1,ease:Power2.easeInOut},"start"),k.fromTo("#startgame_btn .a2",.5,{opacity:.2},{opacity:1,ease:Power2.easeInOut},.25,"start"),k.fromTo("#startgame_btn .a3",.5,{opacity:.2},{opacity:1,ease:Power2.easeInOut},.5,"start"),k.fromTo("#startgame_btn .a1",.5,{opacity:1},{opacity:.2,ease:Power2.easeInOut},.5,"start"),k.fromTo("#startgame_btn .a2",.5,{opacity:1},{opacity:.2,ease:Power2.easeInOut},.75,"start"),k.fromTo("#startgame_btn .a3",.5,{opacity:1},{opacity:.2,ease:Power2.easeInOut},1,"start")})})(jQuery)}),define("game",function(){});